# RabbitMQ安装部署

## 服务器部署

## docker 部署

### 下载镜像

```shell
docker pull rabbitmq:3.13.6-management-alpine
```

### 单节点部署运行

```shell
docker run -d --name rabbitmq  -p 5672:5672 -p 15672:15672 -e RABBITMQ_DEFAULT_USER=admin -e RABBITMQ_DEFAULT_PASS=123456 rabbitmq:3.13.6-management-alpine
```
> -d 后台运行
> --name 容器名称
> --p 映射端口号
> -e 管理页面访问账户和密码

### 集群部署运行

```shell
docker network create rabbitmq

docker run -d --hostname rabbitmq1 --name rabbitmq1 --network rabbitmq -p 5672:5672 -p 15672:15672 -e RABBITMQ_ERLANG_COOKIE="gnerv_rabbitmq_cookie" -e RABBITMQ_DEFAULT_USER=admin -e RABBITMQ_DEFAULT_PASS=123456 rabbitmq:3.13.6-management-alpine

docker run -d --hostname rabbitmq2 --name rabbitmq2 --network rabbitmq -p 5673:5672 -p 15673:15672 -e RABBITMQ_ERLANG_COOKIE="gnerv_rabbitmq_cookie" -e RABBITMQ_DEFAULT_USER=admin -e RABBITMQ_DEFAULT_PASS=123456 rabbitmq:3.13.6-management-alpine

# 进入容器rabbitmq2
docker exec -it rabbitmq2 /bin/bash

# 停止rabbitmq2
rabbitmqctl stop_app
# 重置rabbitmq
rabbitmqctl reset
# 加入rabbitmq1节点
rabbitmqctl join_cluster rabbit@rabbitmq1
# 启动rabbitmq
rabbitmqctl start_app

docker run -d --hostname rabbitmq3 --name rabbitmq3 --network rabbitmq -p 5674:5672 -p 15674:15672 -e RABBITMQ_ERLANG_COOKIE="gnerv_rabbitmq_cookie" -e RABBITMQ_DEFAULT_USER=admin -e RABBITMQ_DEFAULT_PASS=123456 rabbitmq:3.13.6-management-alpine

# 进入容器rabbitmq3
docker exec -it rabbitmq3 /bin/bash

# 停止rabbitmq3
rabbitmqctl stop_app
# 重置rabbitmq
rabbitmqctl reset
# 加入rabbitmq1节点
rabbitmqctl join_cluster rabbit@rabbitmq1
# 启动rabbitmq
rabbitmqctl start_app
```

## 验证
浏览器登陆 [RabbitMQ管控控制台](http://localhost:15672){target="_blank" rel="noreferrer"},输入账户密码登陆。

